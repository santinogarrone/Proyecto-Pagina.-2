import"./style-q3nbi4_n.js";let n=1;const i=document.getElementById("cards-section"),p=document.getElementById("filter-select"),f=document.getElementById("ordenar-options"),g=document.getElementById("search-bar");let u="",y="az";function d(s=1){const t=JSON.parse(localStorage.getItem("favoritosRM"))||[];let o=`https://rickandmortyapi.com/api/character?page=${s}`;u&&u!==""&&(o+=`&status=${u}`),fetch(o).then(async e=>e.ok?e.json():(i.innerHTML="<p>No hay personajes con ese estado.</p>",m(1),null)).then(e=>{if(!e)return;if(i.innerHTML="",!e.results||e.results.length===0){i.innerHTML="<p>No hay personajes con ese estado.</p>",m(1);return}E(e.results,y).forEach(r=>{const c=document.createElement("div");c.className="card";const l=t.includes(String(r.id));c.innerHTML=`
          <span class="star-fav" title="Agregar a favoritos" data-id="${r.id}">
            ${l?"★":"☆"}
          </span>
          <img src="${r.image}" alt="${r.name}" class="card-img" />
          <h3>${r.name}</h3>
          <p>Estado: ${r.status==="Alive"?"Vivo":r.status==="Dead"?"Muerto":"Desconocido"}</p>
        `,i.appendChild(c)}),document.querySelectorAll(".star-fav").forEach(r=>{r.addEventListener("click",function(){const c=this.getAttribute("data-id");let l=JSON.parse(localStorage.getItem("favoritosRM"))||[];l.includes(c)?l=l.filter(h=>h!==c):l.push(c),localStorage.setItem("favoritosRM",JSON.stringify(l)),d(n)})}),m(e.info.pages)}).catch(e=>{console.error("Hubo un error:",e),i.innerHTML="<p>Hubo un error al cargar los personajes.</p>"})}function m(s){let t=document.getElementById("paginacion");t||(t=document.createElement("div"),t.id="paginacion",t.style.display="flex",t.style.justifyContent="center",t.style.gap="1rem",t.style.margin="2rem 0",i.parentNode.appendChild(t)),t.innerHTML="";const o=document.createElement("button");o.textContent="Anterior",o.disabled=n===1,o.onclick=()=>{n>1&&(n--,d(n))},t.appendChild(o);const e=document.createElement("span");e.textContent=`Página ${n} de ${s}`,t.appendChild(e);const a=document.createElement("button");a.textContent="Siguiente",a.disabled=n===s,a.onclick=()=>{n<s&&(n++,d(n))},t.appendChild(a)}p.addEventListener("change",()=>{u=p.value,n=1,d(n)});f.addEventListener("change",()=>{y=f.value,d(n)});function E(s,t="az"){return s.slice().sort((o,e)=>t==="az"?o.name.localeCompare(e.name):t==="za"?e.name.localeCompare(o.name):0)}document.addEventListener("DOMContentLoaded",function(){d(n),g.addEventListener("input",()=>{const s=g.value.toLowerCase(),t=i.querySelectorAll(".card");if(s===""){t.forEach(r=>r.style.display="");let a=document.getElementById("mensaje-no-encontrado");a&&(a.style.display="none");return}let o=!1;t.forEach(a=>{a.querySelector("h3").textContent.toLowerCase().includes(s)?(a.style.display="",o=!0):a.style.display="none"});let e=document.getElementById("mensaje-no-encontrado");e||(e=document.createElement("div"),e.id="mensaje-no-encontrado",e.style.textAlign="center",e.style.fontWeight="bold",e.style.color="red",e.style.marginTop="1rem",e.textContent="No se encontró el nombre buscado.",i.parentNode.insertBefore(e,i.nextSibling)),e.style.display=o?"none":"block"}),mensajeNoEncontrado.style.display=hayCoincidencias?"none":"block"});
